package wtf.monsoon.impl.module.exploit;

import io.github.nevalackin.homoBus.Listener;
import io.github.nevalackin.homoBus.annotations.EventLink;
import lombok.Getter;
import wtf.monsoon.api.module.Category;
import wtf.monsoon.api.module.Module;
import wtf.monsoon.api.setting.Setting;
import wtf.monsoon.impl.event.EventPreMotion;

public class TimerModule extends Module {

    @Getter
    private final Setting<Double> timerSpeed = new Setting<>("TimerSpeed", 1D)
            .minimum(0.5D)
            .maximum(3D)
            .incrementation(0.1D)
            .describedBy("The game speed.");

    public TimerModule() {
        super("Timer", "Change the game speed.", Category.EXPLOIT);
    }

    @Override
    public void onEnable() {
        super.onEnable();
    }

    @Override
    public void onDisable() {
        super.onDisable();
        mc.getTimer().timerSpeed = 1.0f;
    }

    @EventLink
    public Listener<EventPreMotion> eventPreMotionListener = e -> {
        mc.getTimer().timerSpeed = timerSpeed.getValue().floatValue();
    };
}
